<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
</head>
<body>
    <h1>Bienvenido</h1>
    <p id="userInfo"></p>

    <script>
        const token = localStorage.getItem("token");
        if (!token) {
            window.location.href = "login.html";
        }

        fetch("http://localhost:8000/api/v1/users/me", {
            headers: {
                "Authorization": `Bearer ${token}`
            }
        })
        .then(res => {
            if (!res.ok) throw new Error("No autorizado");
            return res.json();
        })
        .then(data => {
            document.getElementById("userInfo").innerText = `Usuario: ${data.username}`;
        })
        .catch(() => {
            window.location.href = "login.html";
        });
    </script>
</body>
</html>
